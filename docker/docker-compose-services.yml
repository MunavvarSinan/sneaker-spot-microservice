version: '1.0'
services:
  auth-service:
    build:
      context: ../backend/services/auth-service
      dockerfile: Dockerfile
    container_name: auth-service
    command: pnpm watch
    depends_on:
      - auth-database
      # - rabbitmq
    ports:
      - "8091:8091"
      - "5555:5555"
    develop:
      watch:
        - action: rebuild
          path: ../backend/services/auth-service/package.json
        - action: rebuild
          path: ../backend/services/auth-service/prisma/schema.prisma
        - action: sync
          path: ../backend/services/auth-service/src
          target: /auth/src
    env_file:
      - ../backend/services/auth-service/.env
    networks:
      - ecommerce